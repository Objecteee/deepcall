# DeepCall - AI å®æ—¶å¤šæ¨¡æ€å¯¹è¯ç³»ç»Ÿ

<div align="center">

ğŸ™ï¸ **è¯­éŸ³å¯¹è¯** | ğŸ“¹ **è§†é¢‘é€šè¯** | ğŸ–¥ï¸ **å±å¹•å…±äº«** | ğŸ§  **é•¿æœŸè®°å¿†**

ä¸€ä¸ªåŸºäºé˜¿é‡Œäº‘ Qwen-Omni æ¨¡å‹çš„å®æ—¶ AI å¤šæ¨¡æ€äº¤äº’ç³»ç»Ÿ

</div>

---

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ¤ å®æ—¶è¯­éŸ³å¯¹è¯
- **åŒå‘å®æ—¶é€šè¯**ï¼šä¸ AI è¿›è¡Œè‡ªç„¶æµç•…çš„è¯­éŸ³å¯¹è¯
- **è¯­éŸ³æ‰“æ–­**ï¼šæ”¯æŒéšæ—¶æ‰“æ–­ AI å‘è¨€ï¼Œæ›´è‡ªç„¶çš„å¯¹è¯ä½“éªŒ
- **æ™ºèƒ½ VAD**ï¼šæœåŠ¡ç«¯è¯­éŸ³æ´»åŠ¨æ£€æµ‹ï¼Œè‡ªåŠ¨è¯†åˆ«è¯´è¯å¼€å§‹/ç»“æŸ
- **éŸ³é¢‘å¯è§†åŒ–**ï¼šå®æ—¶éŸ³é¢‘æ³¢å½¢å±•ç¤ºï¼Œç›´è§‚å±•ç¤ºéº¦å…‹é£è¾“å…¥å’Œ AI è¾“å‡º

### ğŸ¥ å¤šæ¨¡æ€äº¤äº’
- **è§†é¢‘é€šè¯**ï¼šå¼€å¯æ‘„åƒå¤´ï¼ŒAI å¯ä»¥"çœ‹åˆ°"ä½ å¹¶æ ¹æ®è§†è§‰ä¿¡æ¯äº¤äº’
- **å±å¹•å…±äº«**ï¼šå…±äº«å±å¹•å†…å®¹ï¼ŒAI å¯ä»¥å®æ—¶åˆ†æå±å¹•å¹¶æä¾›è§£é‡Š/å»ºè®®
- **å›¾åƒç†è§£**ï¼šæ”¯æŒå®æ—¶å›¾åƒæ•è·å’Œåˆ†æï¼ˆ1 fps / 2 fpsï¼‰

### ğŸ’¬ æ™ºèƒ½å¯¹è¯è®°å½•
- **å®æ—¶æ–‡æœ¬æ˜¾ç¤º**ï¼šè¯­éŸ³è‡ªåŠ¨è½¬æ–‡å­—ï¼Œå®æ—¶å±•ç¤ºå¯¹è¯å†…å®¹
- **Markdown æ¸²æŸ“**ï¼šæ”¯æŒå¯Œæ–‡æœ¬ã€ä»£ç é«˜äº®ã€è¡¨æ ¼ç­‰æ ¼å¼
- **èŠå¤©æ°”æ³¡**ï¼šç°ä»£åŒ– UI è®¾è®¡ï¼Œç±»å¾®ä¿¡é£æ ¼çš„èŠå¤©ç•Œé¢

### ğŸ§  é•¿æœŸè®°å¿†ç³»ç»Ÿ
- **å¯¹è¯æ‘˜è¦**ï¼šè‡ªåŠ¨ç”Ÿæˆå¯¹è¯æ‘˜è¦ï¼Œè®°å½•å…³é”®ä¿¡æ¯
- **ä¸Šä¸‹æ–‡å»¶ç»­**ï¼šä¸‹æ¬¡å¯¹è¯è‡ªåŠ¨åŠ è½½å†å²æ‘˜è¦ï¼ŒAI è®°å¾—ä½ 
- **è®°å¿†ç¼–è¾‘**ï¼šæ‰‹åŠ¨æŸ¥çœ‹å’Œç¼–è¾‘ AI çš„é•¿æœŸè®°å¿†å†…å®¹
- **æœ¬åœ°å­˜å‚¨**ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨ LocalStorageï¼Œéšç§å®‰å…¨

### ğŸ“œ å†å²è®°å½•
- **å¯¹è¯å­˜æ¡£**ï¼šè‡ªåŠ¨ä¿å­˜æ¯æ¬¡é€šè¯è®°å½•ï¼ˆæœ€è¿‘ 50 æ¡ï¼‰
- **å¿«é€Ÿå›é¡¾**ï¼šæŸ¥çœ‹å†å²å¯¹è¯çš„å®Œæ•´æ–‡æœ¬å†…å®¹
- **è®°å½•ç®¡ç†**ï¼šæ”¯æŒåˆ é™¤å•æ¡å†å²è®°å½•

### ğŸ›ï¸ è®¾å¤‡æ§åˆ¶
- **éº¦å…‹é£é€‰æ‹©**ï¼šæ”¯æŒå¤šéº¦å…‹é£è®¾å¤‡åˆ‡æ¢
- **é™éŸ³åŠŸèƒ½**ï¼šä¸€é”®é™éŸ³/å–æ¶ˆé™éŸ³
- **è®¾å¤‡æƒé™ç®¡ç†**ï¼šæ™ºèƒ½å¤„ç†éº¦å…‹é£ã€æ‘„åƒå¤´ã€å±å¹•å…±äº«æƒé™

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**ï¼šReact 18 + TypeScript
- **UI åº“**ï¼šAnt Design 5 + Framer Motion
- **çŠ¶æ€ç®¡ç†**ï¼šZustand
- **æ„å»ºå·¥å…·**ï¼šVite 5
- **å®æ—¶é€šä¿¡**ï¼šWebSocket (åŸç”Ÿ API)
- **éŸ³é¢‘å¤„ç†**ï¼šWeb Audio API

### åç«¯
- **è¿è¡Œæ—¶**ï¼šNode.js 18+
- **æ¡†æ¶**ï¼šExpress
- **WebSocket**ï¼šws
- **AI æ¨¡å‹**ï¼šé˜¿é‡Œäº‘ Qwen-Omni-Turbo-Realtime / Qwen-Turbo

---

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **npm**: >= 9.0.0
- **æµè§ˆå™¨**: Chrome/Edge (æ¨èæœ€æ–°ç‰ˆ)
- **æ“ä½œç³»ç»Ÿ**: Windows / macOS / Linux

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd deepcall
```

### 2ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `backend` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cd backend
```

åˆ›å»º `.env` æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```env
# é˜¿é‡Œäº‘ DashScope API Key (å¿…å¡«)
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# WebSocket æœåŠ¡ç«¯å£ (å¯é€‰ï¼Œé»˜è®¤ 3000)
PORT=3000

# Qwen-Omni å®æ—¶æ¨¡å‹ WebSocket åœ°å€ (å¯é€‰)
QWEN_OMNI_WS_URL=wss://dashscope.aliyuncs.com/api-ws/v1/inference/

# å¦‚æœéœ€è¦ä»£ç†ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶é…ç½®
# HTTP_PROXY=http://127.0.0.1:7890
# HTTPS_PROXY=http://127.0.0.1:7890
```

> ğŸ’¡ **å¦‚ä½•è·å– API Key**: 
> 1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°](https://bailian.console.aliyun.com/)
> 2. æ³¨å†Œ/ç™»å½•è´¦å·
> 3. åœ¨"API-KEY ç®¡ç†"ä¸­åˆ›å»ºæ–°çš„ API Key

### 3ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
cd backend
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install

# å®‰è£…æ ¹ç›®å½•ä¾èµ– (Markdown ç›¸å…³)
cd ..
npm install
```

### 4ï¸âƒ£ å¯åŠ¨å¼€å‘æœåŠ¡å™¨

**æ–¹å¼ä¸€ï¼šåˆ†åˆ«å¯åŠ¨ï¼ˆæ¨èç”¨äºå¼€å‘è°ƒè¯•ï¼‰**

```bash
# ç»ˆç«¯ 1: å¯åŠ¨åç«¯æœåŠ¡
cd backend
npm run dev

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯æœåŠ¡
cd frontend
npm run dev
```

**æ–¹å¼äºŒï¼šç”Ÿäº§ç¯å¢ƒæ„å»º**

```bash
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# æ„å»ºåç«¯
cd ../backend
npm run build

# å¯åŠ¨åç«¯æœåŠ¡ï¼ˆåç«¯ä¼šè‡ªåŠ¨æœåŠ¡å‰ç«¯é™æ€æ–‡ä»¶ï¼‰
npm run start
```

### 5ï¸âƒ£ è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š

- **å¼€å‘ç¯å¢ƒ**: http://localhost:5173
- **ç”Ÿäº§ç¯å¢ƒ**: http://localhost:3000

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
deepcall/
â”œâ”€â”€ frontend/                 # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ App.tsx      # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SubtitlePanel.tsx      # èŠå¤©é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ SpeakingAvatar.tsx     # è¯­éŸ³çŠ¶æ€å¤´åƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ AudioVisualizer.tsx    # éŸ³é¢‘å¯è§†åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ ControlBar.tsx         # æ§åˆ¶æ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ WelcomeScreen.tsx      # æ¬¢è¿é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryDrawer.tsx      # å†å²è®°å½•æŠ½å±‰
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryModal.tsx        # è®°å¿†ç¼–è¾‘æ¨¡æ€æ¡†
â”‚   â”‚   â”‚   â””â”€â”€ DeviceSelector.tsx     # è®¾å¤‡é€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ rtc/             # å®æ—¶éŸ³é¢‘å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ RealtimeWsClient.ts    # WebSocket å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ AudioStreamer.ts       # éŸ³é¢‘æµå¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ PcmPlayer.ts           # PCM éŸ³é¢‘æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ store/           # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ callStore.ts
â”‚   â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ React Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useMediaCapture.ts     # åª’ä½“æ•è·é€»è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ useHistoryAndMemory.ts # å†å²è®°å¿†é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ eid.ts       # äº‹ä»¶ ID ç”Ÿæˆ
â”‚   â”‚   â”‚   â””â”€â”€ logger.ts    # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”œâ”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ history.ts
â”‚   â”‚   â””â”€â”€ styles/          # å…¨å±€æ ·å¼
â”‚   â”‚       â””â”€â”€ global.css
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ backend/                  # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts         # æœåŠ¡å…¥å£
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ chat.ts      # å¯¹è¯æ‘˜è¦ API
â”‚   â”‚   â”œâ”€â”€ ws/
â”‚   â”‚   â”‚   â””â”€â”€ proxy.ts     # WebSocket ä»£ç†
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â””â”€â”€ ws.d.ts      # WebSocket ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡ (éœ€è‡ªè¡Œåˆ›å»º)
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ package.json             # æ ¹é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                # æœ¬æ–‡ä»¶
```

---

## ğŸ® ä½¿ç”¨æŒ‡å—

### é¦–æ¬¡ä½¿ç”¨

1. **å…è®¸éº¦å…‹é£æƒé™**ï¼šé¦–æ¬¡ç‚¹å‡»"å¼€å§‹é€šè¯"æ—¶ï¼Œæµè§ˆå™¨ä¼šè¯·æ±‚éº¦å…‹é£æƒé™ï¼Œè¯·ç‚¹å‡»"å…è®¸"
2. **å¼€å§‹å¯¹è¯**ï¼šç‚¹å‡»"å¼€å§‹é€šè¯"æŒ‰é’®ï¼Œç­‰å¾…è¿æ¥æˆåŠŸï¼ˆçŠ¶æ€æ˜¾ç¤º"æ­£åœ¨å¬"ï¼‰
3. **è‡ªç„¶äº¤æµ**ï¼šç›´æ¥å¯¹ç€éº¦å…‹é£è¯´è¯ï¼ŒAI ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å›å¤
4. **æ‰“æ–­ AI**ï¼šåœ¨ AI è¯´è¯æ—¶ï¼Œä½ å¯ä»¥éšæ—¶å¼€å£æ‰“æ–­

### é«˜çº§åŠŸèƒ½

- **è§†é¢‘é€šè¯**ï¼šç‚¹å‡»"ç›¸æœº"å›¾æ ‡å¼€å¯æ‘„åƒå¤´ï¼ŒAI å¯ä»¥çœ‹åˆ°ä½ 
- **å±å¹•å…±äº«**ï¼šç‚¹å‡»"å±å¹•å…±äº«"å›¾æ ‡ï¼ŒAI å¯ä»¥çœ‹åˆ°å¹¶åˆ†æä½ çš„å±å¹•å†…å®¹
- **é™éŸ³**ï¼šç‚¹å‡»"é™éŸ³"å›¾æ ‡æš‚åœéº¦å…‹é£è¾“å…¥
- **å†å²è®°å½•**ï¼šç‚¹å‡»åº•éƒ¨"å†å²è®°å½•"æŸ¥çœ‹è¿‡å¾€å¯¹è¯
- **ç¼–è¾‘è®°å¿†**ï¼šç‚¹å‡»åº•éƒ¨"ç¼–è¾‘è®°å¿†"æŸ¥çœ‹/ä¿®æ”¹ AI å¯¹ä½ çš„é•¿æœŸè®°å¿†

### æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š
- æ¨èä½¿ç”¨è€³æœºï¼Œé¿å…å›å£°å¯¼è‡´è¯¯è§¦å‘æ‰“æ–­
- å±å¹•å…±äº«å’Œè§†é¢‘é€šè¯ä¼šå¢åŠ æµé‡æ¶ˆè€—
- é•¿æœŸè®°å¿†å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œæ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šä¸¢å¤±
- ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½® HTTPSï¼ˆéº¦å…‹é£/æ‘„åƒå¤´æƒé™è¦æ±‚ï¼‰

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: éº¦å…‹é£æ— æ³•ä½¿ç”¨ï¼Ÿ
**A**: 
1. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å·²æˆäºˆéº¦å…‹é£æƒé™
2. Windows ç³»ç»Ÿæ£€æŸ¥"è®¾ç½® > éšç§ > éº¦å…‹é£"æ˜¯å¦å…è®¸æµè§ˆå™¨è®¿é—®
3. å°è¯•åœ¨æµè§ˆå™¨åœ°å€æ ç‚¹å‡»éº¦å…‹é£å›¾æ ‡é‡æ–°æˆæƒ

### Q: éŸ³é¢‘æœ‰å›å£°/AI é¢‘ç¹è¢«æ‰“æ–­ï¼Ÿ
**A**: 
1. **å¼ºçƒˆæ¨èä½¿ç”¨è€³æœº**ï¼Œé¿å…æ‰¬å£°å™¨å£°éŸ³è¢«éº¦å…‹é£æ•è·
2. æˆ–è€…è°ƒä½éŸ³é‡ï¼Œå‡å°‘å›å£°

### Q: å±å¹•å…±äº«å AI æ— ååº”ï¼Ÿ
**A**: 
1. æ£€æŸ¥åç«¯æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ API Key é…ç½®æ­£ç¡®ä¸”æœ‰è¶³å¤Ÿé¢åº¦
3. å›¾åƒä¼šä»¥ 1 fps é¢‘ç‡å‘é€ï¼ŒAI éœ€è¦ä¸€å®šæ—¶é—´å¤„ç†

### Q: å†å²è®°å½•ä¸¢å¤±ï¼Ÿ
**A**: 
å†å²è®°å½•å­˜å‚¨åœ¨ `localStorage`ï¼Œå¦‚æœæ¸…é™¤æµè§ˆå™¨æ•°æ®æˆ–æ›´æ¢æµè§ˆå™¨/è®¾å¤‡ï¼Œè®°å½•ä¼šä¸¢å¤±ã€‚å»ºè®®å®šæœŸå¯¼å‡ºé‡è¦å¯¹è¯ã€‚

### Q: æ„å»ºå¤±è´¥ï¼Ÿ
**A**: 
1. ç¡®ä¿ Node.js ç‰ˆæœ¬ >= 18
2. åˆ é™¤ `node_modules` å’Œ `package-lock.json`ï¼Œé‡æ–° `npm install`
3. æ£€æŸ¥ TypeScript ç‰ˆæœ¬æ˜¯å¦ä¸€è‡´

---

## ğŸŒ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### ä½¿ç”¨ Nginx + HTTPS

1. **æ„å»ºé¡¹ç›®**
```bash
cd frontend && npm run build
cd ../backend && npm run build
```

2. **é…ç½® Nginx**
```nginx
server {
    listen 443 ssl;
    server_name yourdomain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/deepcall/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯ API
    location /chat/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # WebSocket ä»£ç†
    location /ws/qwen-omni {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        proxy_set_header Host $host;
    }
}
```

3. **ä½¿ç”¨ systemd è¿è¡Œåç«¯**
```bash
sudo systemctl enable deepcall-backend
sudo systemctl start deepcall-backend
```

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ Issue åé¦ˆã€‚

---

<div align="center">

**Made with â¤ï¸ by DeepCall Team**

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼

</div>
